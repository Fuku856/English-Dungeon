# English Dungeon

迷宮を探索し、英語の力で道を切り開け！
8bitレトロスタイルの英語学習ダンジョンRPGです。モンスターとのバトルを通じて、単語・文法・リスニング・会話力を鍛えながら、最深部を目指しましょう。

## 遊び方

### 基本ルール
プレイヤーはダンジョン（10x10のフロア）を探索します。
「階段」を見つけて次の階層へ進むことが目的です。
移動中にモンスターと遭遇するとバトルが発生します。問題に正解して敵を倒し、経験値を稼いでレベルアップしましょう。
5階、8階、10階の階段には「ボス」が待ち構えています。連続で問題に正解してボスを倒し、10階のクリアを目指しましょう。
HPが0になるとゲームオーバーです。

### 操作方法
画面上の仮想パッド、またはキーボードで操作します。

*   **十字キー / 矢印キー**: 移動・選択
*   **Aボタン / Z・Enterキー**: 決定・攻撃・調べる
*   **Bボタン / X・Backspaceキー**: キャンセル・メニューを開く

### バトルシステム（5つの試練）
遭遇する敵によって出題形式が異なります。

1.  **TYPE A: Slash (単語力)**
    *   画面を飛び交う日本語訳オーブの中から、表示された英単語の正しい訳を斬る（タップ/クリック）アクションゲーム。
2.  **TYPE B: Shield (文法力)**
    *   穴あきの英文に対し、正しい選択肢を選んで防御する4択クイズ。
3.  **TYPE C: Magic (語順力)**
    *   バラバラの単語を正しい語順で並び替え、魔法を発動させる整列問題。
4.  **TYPE D: Echo (リスニング力)**
    *   読み上げられた英単語を聞き取り、正しいスペルを選ぶリスニングクイズ。
5.  **TYPE E: Talk (会話力)**
    *   相手のセリフに対し、最も適切な返答を選んで会話を成立させるコミュニケーション問題。

### アイテム・メニュー
Bボタンでメニューを開き、ステータスの確認やアイテムの使用ができます。
*   **Potion**: HPを回復します（バトル勝利時にドロップすることがあります）。
*   **Save/Load**: ブラウザのローカルストレージに進行状況を保存・読み込みできます。

---

## 🛠️ 開発者向けガイド（問題データの追加方法）

このゲームは Vanilla JavaScript (ES6+) と HTML5 Canvas で作られています。フレームワークは使用していません。
問題データは `js/data.js` ファイルで管理されています。

### 新しい単語・問題を追加する手順

1.  プロジェクト内の `js/data.js` ファイルを開きます。
2.  追加したい問題タイプの配列（例: `vocabList`）を探します。
3.  以下の形式で新しいデータを追加します。

#### TYPE A (単語) の場合
`vocabList` に追加します。
```javascript
{ en: "Apple", jp: "りんご" },
```

#### TYPE B (文法) の場合
`grammarList` に追加します。
```javascript
{ 
    q: "This is ___ pen.", 
    options: ["a", "an", "the", "two"], 
    ans: "a" 
},
```

#### TYPE C (語順) の場合
`syntaxList` に追加します。
```javascript
{ 
    jp: "これはペンです", 
    words: ["This", "is", "a", "pen"] 
},
```

### 技術スタック
*   **Core**: HTML5, CSS3, Vanilla JavaScript (ECMAScript 2020+)
*   **Graphics**: HTML5 Canvas API (2D Context)
*   **Audio**: Web Audio API (BGM/SE合成), Web Speech API (TTS: Text-to-Speech)
*   **Font**: DotGothic16 (Google Fonts)
*   **Storage**: LocalStorage API (セーブデータ)
